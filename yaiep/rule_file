(globals (?max_uno 10) (?max_due 15) (?max_tre 5))
(template Patient (slot fever (default 5) (type integer) (range 0 global.?max_uno)) (slot spots (default global.?max_uno)) (slot rash) (slot sore_throat) (slot innoculated))
(template Diagnosis (slot diagnosis))
(template Treatment (slot treatment))
(template Solution (slot x_val) (slot y_val))

(facts (genitore franco global.?max_uno) (genitore franco 30) (Patient (fever ?x) (spots 3) (sore_throat no) (innoculated 5)) (Patient (fever 5) (spots 3) (sore_throat yes) (innoculated 0)))


(rule (Patient (fever 5) (spots 3) (sore_throat no) (innoculated ?y)) (bind ?x (Patient (fever 5) (spots 3) (sore_throat no) (innoculated ?y))) then (modify ?x (fever abs(global.?max_due - ?y)) (spots 3) (sore_throat no) (innoculated 0)))
(rule (Patient (fever ?x) (spots ?y) (innoculated no)) then (assert (Solution (x_val ?x) (y_val ?y))))
(rule (Patient (rash yes)) then (assert (Diagnosis (diagnosis allergy))))
(rule (Patient (sore_throat yes) (fever high)) then (assert (Diagnosis (diagnosis flu))))
(rule (Patient (fever ?y) (spots ?x) (sore_throat yes) (innoculated no)) ((?x - 2) == ((?y - ?y) + (?x - 2))) then (assert (Diagnosis (diagnosis ?x))))
(rule (Diagnosis (diagnosis measles)) then (assert (Treatment (treatment pennicillin))))
(rule (Diagnosis (diagnosis allergy)) then (assert (Treatment (treatment allergy_shot))))
(rule (Diagnosis (diagnosis flu)) then (assert (Treatment (treatment bed_rest))))

(final_state (Patient (fever 10) (spots 3) (sore_throat no) (innoculated 0)))



